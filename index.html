<!doctype html>
<html lang="en">
<head>
  <meta name="monetag" content="c5f46119e4431172aef21de1bd8db179">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Emoji Browser — Copy from emoji-api.com</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#60a5fa}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{background:linear-gradient(180deg,#071023 0%, #071a30 100%);color:#e6eef6;padding:20px}
    .app{max-width:1200px;margin:0 auto}
    header{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .controls{margin-left:auto;display:flex;gap:8px;align-items:center}
    input[type=search]{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit;width:260px}
    select{padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit}
    button{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#04243b;cursor:pointer}
    .stats{color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-top:16px}
    .card{background:var(--card);padding:10px;border-radius:10px;display:flex;flex-direction:column;align-items:center;gap:8px;user-select:none}
    .emoji{font-size:36px}
    .name{font-size:13px;color:var(--muted);text-align:center;word-break:break-word}
    .row{display:flex;gap:8px;align-items:center}
    .copy-btn{padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;cursor:pointer}
    .hint{font-size:12px;color:var(--muted);margin-top:8px}

    .loader{display:flex;align-items:center;gap:10px}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent);opacity:0.9;animation:pop 1s infinite}
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes pop{0%{transform:scale(.6);opacity:.2}50%{transform:scale(1.1);opacity:1}100%{transform:scale(.6);opacity:.2}}

    footer{margin-top:18px;color:var(--muted);font-size:13px}

    @media (max-width:480px){input[type=search]{width:140px}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Emoji Browser — copy any emoji</h1>
        <div class="stats" id="stats">Loading…</div>
      </div>

      <div class="controls">
        <input id="search" type="search" placeholder="Search name, group, subgroup, or code"/>
        <select id="groupFilter"><option value="">All groups</option></select>
        <button id="refresh">Refresh</button>
      </div>
    </header>

    <div id="status" class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div id="statusText">Fetching emojis from emoji-api.com</div></div>

    <div id="grid" class="grid" aria-live="polite"></div>

 
  </div>

  <script>
    // Replace the access key below with your own if needed (the user provided one in the request)
    const API_URL = 'https://emoji-api.com/emojis?access_key=68eba42428de4811e7ec51f43a08a185fb96f11a';

    const grid = document.getElementById('grid');
    const statusText = document.getElementById('statusText');
    const status = document.getElementById('status');
    const stats = document.getElementById('stats');
    const searchInput = document.getElementById('search');
    const groupSelect = document.getElementById('groupFilter');
    const refreshBtn = document.getElementById('refresh');

    let allEmojis = [];
    let renderedCount = 0;

    async function fetchEmojis(){
      status.style.display = 'flex';
      statusText.textContent = 'Fetching emojis...';
      try{
        const res = await fetch(API_URL);
        if(!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        if(!Array.isArray(data)) throw new Error('Unexpected response format');
        allEmojis = data;
        stats.textContent = `${data.length} emojis loaded`;
        populateGroups(data);
        renderFiltered();
      }catch(err){
        statusText.textContent = 'Failed to fetch emojis: ' + err.message;
        stats.textContent = 'Error';
        console.error(err);
      }
    }

    function populateGroups(data){
      const groups = new Map();
      data.forEach(e=>{ if(e.group) groups.set(e.group, true) });
      // clear
      groupSelect.innerHTML = '<option value="">All groups</option>';
      Array.from(groups.keys()).sort().forEach(g=>{
        const opt = document.createElement('option'); opt.value = g; opt.textContent = g; groupSelect.appendChild(opt);
      });
    }

    function renderFiltered(){
      const q = searchInput.value.trim().toLowerCase();
      const g = groupSelect.value;
      const filtered = allEmojis.filter(e=>{
        if(g && e.group !== g) return false;
        if(!q) return true;
        return (e.slug || '').toLowerCase().includes(q) || (e.character || '').includes(q) || (e.unicodeName || '').toLowerCase().includes(q) || (e.subGroup || '').toLowerCase().includes(q);
      });
      stats.textContent = `${filtered.length} / ${allEmojis.length} shown`;
      // clear and render in batches to avoid blocking UI
      grid.innerHTML = '';
      renderedCount = 0;
      if(filtered.length===0){
        grid.innerHTML = '<div style="grid-column:1/-1;color:var(--muted)">No emojis match your search.</div>';
        status.style.display = 'none';
        return;
      }
      status.style.display = 'flex';
      statusText.textContent = `Rendering 0 / ${filtered.length}`;
      const batchSize = 120; // tuneable
      let i = 0;
      function renderBatch(){
        const fragment = document.createDocumentFragment();
        for(let j=0;j<batchSize && i<filtered.length;j++,i++){
          const e = filtered[i];
          const card = makeCard(e);
          fragment.appendChild(card);
          renderedCount++;
        }
        grid.appendChild(fragment);
        statusText.textContent = `Rendering ${renderedCount} / ${filtered.length}`;
        if(i < filtered.length){
          // yield to UI
          setTimeout(renderBatch, 0);
        } else {
          status.style.display = 'none';
        }
      }
      renderBatch();
    }

    function makeCard(e){
      const wrap = document.createElement('div'); wrap.className = 'card';
      const emojiEl = document.createElement('div'); emojiEl.className = 'emoji'; emojiEl.textContent = e.character || '\u{1f4a9}';
      const name = document.createElement('div'); name.className = 'name'; name.textContent = e.unicodeName || e.slug || '';
      const row = document.createElement('div'); row.className = 'row';
      const copyBtn = document.createElement('button'); copyBtn.className = 'copy-btn'; copyBtn.textContent = 'Copy';

      // copy on emoji click
      emojiEl.addEventListener('click', ()=>copyEmoji(e.character, emojiEl));
      copyBtn.addEventListener('click', ()=>copyEmoji(e.character, copyBtn));

      row.appendChild(copyBtn);
      wrap.appendChild(emojiEl);
      wrap.appendChild(name);
      wrap.appendChild(row);
      // tooltip on hover: show short data
      wrap.title = `Codes: ${e.codePoint ? e.codePoint : (e.unicodeName || '')}`;
      return wrap;
    }

    async function copyEmoji(text, anchorEl){
      if(!text) return;
      try{
        await navigator.clipboard.writeText(text);
        const old = anchorEl.textContent;
        anchorEl.textContent = 'Copied!';
        setTimeout(()=>{ anchorEl.textContent = old; }, 1000);
      }catch(err){
        // fallback: select and prompt
        try{
          const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
          document.execCommand('copy'); document.body.removeChild(ta);
          const old = anchorEl.textContent; anchorEl.textContent = 'Copied!'; setTimeout(()=>{ anchorEl.textContent = old; }, 1000);
        }catch(err2){
          alert('Copy failed: ' + (err2.message || err.message));
        }
      }
    }

    // wire events
    searchInput.addEventListener('input', ()=>{
      // small debounce
      clearTimeout(searchInput._t);
      searchInput._t = setTimeout(renderFiltered, 150);
    });
    groupSelect.addEventListener('change', renderFiltered);
    refreshBtn.addEventListener('click', ()=>{ fetchEmojis(); });

    // initial load
    fetchEmojis();
  </script>
</body>
</html>

